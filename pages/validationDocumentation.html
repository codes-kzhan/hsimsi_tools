<!DOCTYPE html>
<html>

<head>
<meta charset='utf-8'>
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="description" content="isetbioValidation: script validation">

<link rel="stylesheet" type="text/css" media="screen" href="../stylesheets/stylesheet.css">

<title>isetbioValidation</title>
</head>

<body>

<!-- HEADER -->
<div id="header_wrap" class="outer">
    <header class="inner">
      <h1 id="project_title">isetbio: script validation</h1>
      <h2 id="project_tagline">documentation and usage of the @UnitTest class</h2>
    </header>
</div>

<!-- MAIN CONTENT -->
<div id="main_content_wrap" class="outer">
  <section id="main_content" class="inner">
    <h2>
    <a id="overview" class="anchor" href="#overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overview
    </h2>


<p>This document describes how to use the custom @UnitTest class for validating isetbio scripts. The class executes isetbio scripts and manages the data generated by these scripts so as to conduct different levels of validation. Starting at the most basic (and fastest) level, the available <font color="#ff4477"> validation modes</font> are:
<ul>
  <li><font face="Menlo", color="#ff4477">'RUNTIME_ERRORS_ONLY'</font>:  only checking for run-time exceptions.</li>
  <li><font face="Menlo", color="#ff4477">'FAST'</font>: run-time exceptions + SHA-256 signature validation of select data.</li>
  <li><font face="Menlo", color="#ff4477">'FULL'</font>: run-time exceptions + numerical validation of select data.</li>
  <li><font face="Menlo", color="#ff4477">'PUBLISH'</font>: run-time exceptions + numerical validation + publication to <a href="https://github.com/isetbio/isetbio/wiki/ValidationResults" class="user-mention">github site</a>.
</ul>
</p> 

<p>
The <font face="Menlo", color="#ff4477">'RUNTIME_ERRORS_ONLY'</font> validation mode is the quickest and may be useful to ensure the basic integrity of isetbio core methods, for example that calls to isetbio functions do not crash. 

<p>The <font face="Menlo", color="#ff4477">'FAST'</font> validation mode can be used to ensure that the data generated by isetbio scripts remain consistent across different versions of isetbio and/or across different machines and operating systems. 

<p>If any data inconsistencies are detected, the <font face="Menlo", color="#ff4477">'FULL'</font> validation run would be useful to identify the data fields whose values have changed and to provide quantitative descriptions of any differences. 

<p>Finally, the <font face="Menlo", color="#ff4477">'PUBLISH'</font> validation mode is useful as it generates full reports of isetbio code and plots of the corresponding computations, which can serve as tutorials for the various functionalities of isetbio.

<br>
<br>
<h2>
<a id="Basic Usage" class="anchor" href="#designer-templates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Basic Usage
</h2>

A validation session can be conducted by calling the following executive method:

<pre>
<font face="Menlo">
UnitTest.runValidationSession(vScriptsList, <font color="#ff4477">validationMode</font>);
</font>
</pre>

where <font face="Menlo">vScriptsList</font> is a cell array containing the names of individual validation scripts or the names of validation script directories. 
<br>
<br>

<h6>
<a id="Example1" class="anchor" href="#designer-templates" aria-hidden="true"><span class="octicon octicon-link"></span></a><font color="#7777cc", face="Menlo, size="">Example 1: validating individual scripts. </font>
</h6>
<pre><code>
vScriptsList = {...
   {'v_Colorimetry'} ...
   {'v_IrradianceIsomerizations'} ...
};

UnitTest.runValidationSession(vScriptsList, <font color="#ff4477">'FAST'</font>);
</code></pre>
The above code segment can be used to conduct a 'FAST' validation of scripts <font face="Menlo">'v_Colorimetry.m', 'v_IrradianceIsomerizations.m'</font>.

<br>
<br>
<h6>
<a id="Example2" class="anchor" href="#designer-templates" aria-hidden="true"><span class="octicon octicon-link"></span></a><font color="#7777cc", face="Menlo, size="">Example 2: validating scripts in directories. </font>
</h6>
<pre><code>
vScriptsList = {...
  {'validationScripts/color'} ...
  {'validationScripts/cones'} ...
  {'validationScripts/human'} ...
  {'validationScripts/radiometry'} ...
};

UnitTest.runValidationSession(vScriptsList, <font color="#ff4477">'FULL'</font>);
</code></pre>
The above code segment can be used to conduct a 'FULL' validation of all scripts contained in directories:
<ul>
  <li><font face="Menlo">'$ISETBIOROOT/validation/validationScripts/color</font></li>
  <li><font face="Menlo">'$ISETBIOROOT/validation/validationScripts/cones</font></li>
  <li><font face="Menlo">'$ISETBIOROOT/validation/validationScripts/human</font></li>
  <li><font face="Menlo">'$ISETBIOROOT/validation/validationScripts/radiometry</font></li>
</ul>

<br>
<h2>
<a id="Tuning" class="anchor" href="#designer-templates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tuning the validation run
</h2>

The user can fine tune how validation runs are performed by setting various preferences. The available preferences are:

  </body>
</html>
