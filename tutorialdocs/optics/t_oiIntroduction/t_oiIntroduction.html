
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>t_oiIntroduction.m</title><meta name="generator" content="MATLAB 8.4"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2015-03-09"><meta name="DC.source" content="t_oiIntroduction.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>t_oiIntroduction.m</h1><!--introduction--><p>Introduction to ISET objects and functions:  The optical image (OI)</p><p>ISET is organized around several key objects (scene, optics, sensor and processor) that reflect the important parts of the image acquisition pipeline. The ISET methods generally rely on calculating with these objects. By using these objects properly, the code and analysis are much easier to understand.</p><p>This tutorial introduces the ISET object "optical image" or OI. The OI describes the irradiance field at the sensor surface.  It is computed from the scene (radiance), and the optics.  The optics object is stored in a slot within the optical image.</p><p>Use t_"TAB KEY" to see the list of tutorials</p><p>Copyright ImagEval Consultants, LLC, 2012.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Initialize ISET</a></li><li><a href="#2">Create a point array scene</a></li><li><a href="#3">Create and show an optical image</a></li><li><a href="#4">Increase the f-number of the optics and compute again.</a></li><li><a href="#5">Use plotOI to compare the two different optics</a></li><li><a href="#6">Show the effect of the larger f/# on the PSF</a></li><li><a href="#7">Use plotOI to quantify the optical image</a></li><li><a href="#8">Plot an RGB representation of the new irradiance field</a></li><li><a href="#9">Now, run using parameters from human optics</a></li><li><a href="#10">End</a></li></ul></div><h2>Initialize ISET<a name="1"></a></h2><pre class="codeinput">ieInit;
</pre><h2>Create a point array scene<a name="2"></a></h2><p>This and other simple synthetic scenes are useful for examining simple optical properties</p><pre class="codeinput">scene = sceneCreate(<span class="string">'pointarray'</span>);   <span class="comment">% Creates an array of points</span>
scene = sceneSet(scene,<span class="string">'hfov'</span>,1);    <span class="comment">% 1 deg field of view</span>
vcAddAndSelectObject(scene); sceneWindow;
</pre><img vspace="5" hspace="5" src="t_oiIntroduction_01.png" alt=""> <h2>Create and show an optical image<a name="3"></a></h2><p>ISET has several optics models that you can experiment with. These include shift-invariant optics, in which there is a different shift-invariant pointspread function for each wavelength, and a ray-trace method, in which we read in data from Zemax and create a shift-variant set of pointspread functions along with a geometric distortion function. The default optical image has diffraction limited optics.  We compute the irradiance field from the scene.</p><pre class="codeinput">oi = oiCreate;
oi = oiCompute(scene,oi);
oi = oiSet(oi,<span class="string">'name'</span>,<span class="string">'Small f number'</span>);
vcAddAndSelectObject(oi); oiWindow;
</pre><img vspace="5" hspace="5" src="t_oiIntroduction_02.png" alt=""> <h2>Increase the f-number of the optics and compute again.<a name="4"></a></h2><p>Increasing the f-number of the optics will blur the irradiance image. The optics structure is attached to the optical image.  To increase the f-number we get the optics object, set its' f number, and then reattach it to the optical image.</p><pre class="codeinput">optics  = oiGet(oi,<span class="string">'optics'</span>);
fnSmall = opticsGet(optics,<span class="string">'f number'</span>);
fnBig   = 3*fnSmall;
optics  = opticsSet(optics,<span class="string">'fNumber'</span>,fnBig);
oiBigF  = oiSet(oi,<span class="string">'optics'</span>,optics);
oiBigF  = oiCompute(scene,oiBigF);
oiBigF  = oiSet(oiBigF,<span class="string">'name'</span>,<span class="string">'Big f number'</span>);   <span class="comment">% Name for the GUI</span>
vcAddAndSelectObject(oiBigF); oiWindow;
</pre><img vspace="5" hspace="5" src="t_oiIntroduction_03.png" alt=""> <h2>Use plotOI to compare the two different optics<a name="5"></a></h2><p>In this case we plot the point spread function at 600 nm.  First for the small f/#.</p><pre class="codeinput"><span class="comment">% Let's view this wavelength</span>
thisWave = 600;
<span class="comment">% Most ISET plotting routines can return the plotted data into a variable</span>
pData = plotOI(oi,<span class="string">'psf'</span>,[], thisWave);
set(gca,<span class="string">'xlim'</span>,[-20 20],<span class="string">'ylim'</span>,[-20 20])
colormap(0.5*gray + 0.5*ones(size(gray)))
title(sprintf(<span class="string">'F-number = %d'</span>,fnSmall))

<span class="comment">% Here are the values returned by plotOI</span>
pData
</pre><pre class="codeoutput">
pData = 

      x: [200x200 double]
      y: [200x200 double]
    psf: [200x200 double]

</pre><img vspace="5" hspace="5" src="t_oiIntroduction_04.png" alt=""> <h2>Show the effect of the larger f/# on the PSF<a name="6"></a></h2><p>This is for the larger f/#.  We just show a 20 um square region.</p><pre class="codeinput">plotOI(oiBigF,<span class="string">'psf'</span>,[], thisWave);
set(gca,<span class="string">'xlim'</span>,[-20 20],<span class="string">'ylim'</span>,[-20 20])
colormap(0.5*copper + 0.5*ones(size(copper)))
title(sprintf(<span class="string">'F-number = %d'</span>,fnBig))

<span class="comment">% We can also get the plotted values from the figure</span>
pData = get(gcf,<span class="string">'userdata'</span>);
pData
</pre><pre class="codeoutput">
pData = 

      x: [200x200 double]
      y: [200x200 double]
    psf: [200x200 double]

</pre><img vspace="5" hspace="5" src="t_oiIntroduction_05.png" alt=""> <h2>Use plotOI to quantify the optical image<a name="7"></a></h2><p>This example plots an RGB representation of the irradiance field in the optical image.</p><pre class="codeinput">xy = [];        <span class="comment">% Irrelevant variable for this plot</span>
gSpacing = 17;  <span class="comment">% The grid spacing in microns</span>
plotOI(oi,<span class="string">'irradiance image with grid'</span>,xy,gSpacing);
title(sprintf(<span class="string">'F-number = %d'</span>,fnSmall))
</pre><img vspace="5" hspace="5" src="t_oiIntroduction_06.png" alt=""> <h2>Plot an RGB representation of the new irradiance field<a name="8"></a></h2><pre class="codeinput">xy = []; gSpacing = 17;
plotOI(oiBigF,<span class="string">'irradiance image with grid'</span>,xy,gSpacing);
title(sprintf(<span class="string">'Zoomed view: F-number = %d'</span>,fnBig))
</pre><img vspace="5" hspace="5" src="t_oiIntroduction_07.png" alt=""> <h2>Now, run using parameters from human optics<a name="9"></a></h2><p>The defcous of the human optics is quite surprising.  In particular, the blurring of the short wavelength light is very extreme.  That is illustrated in this example.</p><pre class="codeinput">oiHuman     = oiCreate(<span class="string">'human'</span>);
oiHuman = oiCompute(scene,oiHuman);
oiHuman = oiSet(oiHuman,<span class="string">'name'</span>,<span class="string">'human optics'</span>);
vcAddAndSelectObject(oiHuman); oiWindow;
</pre><img vspace="5" hspace="5" src="t_oiIntroduction_08.png" alt=""> <h2>End<a name="10"></a></h2><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2014b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% t_oiIntroduction.m
%
% Introduction to ISET objects and functions:  The optical image (OI)
%
% ISET is organized around several key objects (scene, optics, sensor and
% processor) that reflect the important parts of the image acquisition
% pipeline. The ISET methods generally rely on calculating with these
% objects. By using these objects properly, the code and analysis are much
% easier to understand.
%
% This tutorial introduces the ISET object "optical image" or OI. The OI
% describes the irradiance field at the sensor surface.  It is computed
% from the scene (radiance), and the optics.  The optics object is stored
% in a slot within the optical image.
% 
% Use t_"TAB KEY" to see the list of tutorials 
%
% Copyright ImagEval Consultants, LLC, 2012.

%% Initialize ISET 
ieInit;

%% Create a point array scene
% This and other simple synthetic scenes are useful for examining simple optical properties
scene = sceneCreate('pointarray');   % Creates an array of points
scene = sceneSet(scene,'hfov',1);    % 1 deg field of view
vcAddAndSelectObject(scene); sceneWindow;

%% Create and show an optical image
% ISET has several optics models that you can experiment with. These
% include shift-invariant optics, in which there is a different
% shift-invariant pointspread function for each wavelength, and a ray-trace
% method, in which we read in data from Zemax and create a shift-variant
% set of pointspread functions along with a geometric distortion function.
% The default optical image has diffraction limited optics.  We compute the
% irradiance field from the scene.
oi = oiCreate;                        
oi = oiCompute(scene,oi);
oi = oiSet(oi,'name','Small f number');
vcAddAndSelectObject(oi); oiWindow;

%% Increase the f-number of the optics and compute again. 
% Increasing the f-number of the optics will blur the irradiance image.
% The optics structure is attached to the optical image.  To increase the
% f-number we get the optics object, set its' f number, and then reattach it
% to the optical image.
optics  = oiGet(oi,'optics');
fnSmall = opticsGet(optics,'f number');
fnBig   = 3*fnSmall;
optics  = opticsSet(optics,'fNumber',fnBig);
oiBigF  = oiSet(oi,'optics',optics);
oiBigF  = oiCompute(scene,oiBigF);
oiBigF  = oiSet(oiBigF,'name','Big f number');   % Name for the GUI
vcAddAndSelectObject(oiBigF); oiWindow;

%% Use plotOI to compare the two different optics 
% In this case we plot the point spread function at 600 nm.  First for the
% small f/#.

% Let's view this wavelength
thisWave = 600;
% Most ISET plotting routines can return the plotted data into a variable
pData = plotOI(oi,'psf',[], thisWave);   
set(gca,'xlim',[-20 20],'ylim',[-20 20])
colormap(0.5*gray + 0.5*ones(size(gray)))
title(sprintf('F-number = %d',fnSmall))

% Here are the values returned by plotOI
pData

%% Show the effect of the larger f/# on the PSF
% This is for the larger f/#.  We just show a 20 um square region.
plotOI(oiBigF,'psf',[], thisWave);
set(gca,'xlim',[-20 20],'ylim',[-20 20])
colormap(0.5*copper + 0.5*ones(size(copper)))
title(sprintf('F-number = %d',fnBig))

% We can also get the plotted values from the figure
pData = get(gcf,'userdata');
pData

%% Use plotOI to quantify the optical image 
% This example plots an RGB representation of the irradiance field in the
% optical image.
xy = [];        % Irrelevant variable for this plot
gSpacing = 17;  % The grid spacing in microns
plotOI(oi,'irradiance image with grid',xy,gSpacing);
title(sprintf('F-number = %d',fnSmall))

%% Plot an RGB representation of the new irradiance field  
xy = []; gSpacing = 17;
plotOI(oiBigF,'irradiance image with grid',xy,gSpacing);
title(sprintf('Zoomed view: F-number = %d',fnBig))

%% Now, run using parameters from human optics
% The defcous of the human optics is quite surprising.  In particular, the
% blurring of the short wavelength light is very extreme.  That is
% illustrated in this example.
oiHuman     = oiCreate('human');
oiHuman = oiCompute(scene,oiHuman);
oiHuman = oiSet(oiHuman,'name','human optics');
vcAddAndSelectObject(oiHuman); oiWindow;

%% End



##### SOURCE END #####
--></body></html>